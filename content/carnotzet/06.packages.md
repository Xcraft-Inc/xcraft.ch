---
title: 'Paquets'
weight: 60
tags: ['carnotzet', 'os', 'package']
pre: '<b>5.6 </b>'
---

Les paquets sont au coeur d'Xcraft et au coeur de **Carnotzet OS**. Sans les
paquets il n'y aurait rien. C'est une particularité ici. Le toolchain fonctionne
entièrement avec des paquets de différents types. Et tous ces paquets sont
construit avec et pour wpkg. **Carnotzet OS** hérite du gestionnaire de paquets
du toolchain Xcraft. L'ensemble du produit est alors cohérent de bout en bout.

## L'essentiel

Ce gestionnaire de paquet se comporte comme une combinaison de dpkg et d'apt en
une seule commande. Il permet de manipuler des paquets indépendants ainsi que
l'ensemble du déploiement. Cet outil est très puissant. Si vous ne le manipuler
pas avec soin, vous pourriez risquer de scier votre propre branche. En effet,
absolument tout le système et la partition de démarrage sont gérées par le
package manager. Désinstaller des paquets essentiels tels que
`carnotzet+rootfs-rpi4b-x+bin` par exemple, vont rendre l'ensemble du
déploiement inexploitable. Si ce problème se produit, il est obligatoire de
réparer l'installation par une réinstallation de **Carnotzet OS**.

Afin de vous familiariser avec wpkg, voici quelques cas courants d'utilisation.

### Lister les paquets installés

```
wpkg -v --list
```

### Mettre à jour les indexes

Les sources des paquets sont paramétrés dans le fichier
[`/boot/sources.list`](/carnotzet/03.settings/#bootsourceslist) présenté à la
section 3.

```
wpkg -v --update
```

### Lister le contenu des indexes

Cette commande permet de trouver la liste complète de tous les paquets auxquels
vous avez accès.

```
wpkg -v --list-index-packages /var/lib/wpkg/core/indexes/*
```

### Installer un paquet

Pour installer un nouveau paquet, il suffit de donner son nom à la commande
`--install`. Par exemple, si vous souhaitez installer le serveur OpenSSH,
procédez ainsi :

```
wpkg -v --install openbsd+openssh-rpi4b-x+bin
```

### Effectuer une mise à niveau

Après avoir fait une mise à jour avec `--update`, vous pouvez demander une mise
à niveau de l'ensemble de l'installation avec la commande `--upgrade`.

```
wpkg -v --upgrade
```

## La liste est pauvre

En effet, il existe encore peu de paquets destinés à **Carnotzet OS**. Cette
liste augmentera au fur et à mesure des besoins remontés jusqu'aux oreils du
projet.

## Pourquoi wpkg

Le gestionnaire de paquets wpkg est assez commun et il est utilisé avec
**Carnotzet OS** pour plusieurs raisons. Le toolchain Xcraft qui permet de créer
ce système d'exploitation, utilise depuis 2014 wpkg comme pilier pour la
génération de tous types de paquets et pour les trois plateformes majeurs que
sont Linux, macOS et Windows. Ainsi wpkg fonctionne de la même manière partout
et c'est une des raison principale qui fait qu'il est devenu incontournable pour
Xcraft. Il y a bien entendu d'autres raisons comme le fait qu'il ait peu de
dépendances (C++ avec la majorité des dépendances en statique). Il est très
complet car il permet de fonctionner en tant que gestionnaire de build; il est
capable de compiler un dépôt entier de paquets sources, en paquets binaires
correspondants. Cet aspect très versatile le rend très puissant. Il a également
été modifié pour les besoins d'Xcraft, sa base de code étant devenue
maîtrisable. En construisant **Carnotzet OS** il était évident qu'il deviendrait
centrale au système.
